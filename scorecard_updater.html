<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Interactive Cricket Scorecard Updater</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #141E30;
            color: white;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 20px;
            padding: 20px;
        }
        .updater {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
            justify-content: center;
        }
        button {
            padding: 10px 20px;
            background-color: #00bfff;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
        }
        button:hover {
            background-color: #007bbf;
        }
        .scorecard {
            background: #243B55;
            padding: 15px;
            border-radius: 10px;
            margin: 10px;
            text-align: center;
        }
    </style>
</head>
<body>
    <h1>Cricket Scorecard Updater</h1>
    <div class="scorecard">
        <p id="score">Score: 0-0</p>
        <p id="overs">Overs: 0.0</p>
        <p id="striker">Striker: Batter 1</p>
        <p id="nonStriker">Non-Striker: Batter 2</p>
    </div>
    <div class="updater">
        <button onclick="updateScore(1)">1 Run</button>
        <button onclick="updateScore(2)">2 Runs</button>
        <button onclick="updateScore(3)">3 Runs</button>
        <button onclick="updateScore(4)">4 Runs</button>
        <button onclick="updateScore(6)">6 Runs</button>
        <button onclick="noBall()">No Ball</button>
        <button onclick="wideBall()">Wide Ball</button>
        <button onclick="wicket()">Wicket</button>
    </div>

    <script>
        let runs = 0, wickets = 0, balls = 0, overs = 0.0;
        let striker = 'Batter 1', nonStriker = 'Batter 2';

        function updateScore(run) {
            runs += run;
            balls++;
            if (balls % 6 === 0) {
                overs++;
                balls = 0;
            }
            if (run % 2 !== 0) {
                [striker, nonStriker] = [nonStriker, striker];
            }
            updateBackend();
        }

        function noBall() {
            runs++;
            updateBackend();
        }

        function wideBall() {
            runs++;
            updateBackend();
        }

        function wicket() {
            wickets++;
            balls++;
            updateBackend();
        }

        function updateBackend() {
            const data = {
                runs: runs,
                wickets: wickets,
                overs: `${overs}.${balls}`,
                batter1: striker,
                batter2: nonStriker,
                striker: striker === 'Batter 1' ? 'batter1' : 'batter2'
            };

            fetch('/api/score', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify(data)
            })
            .then(() => updateDisplay())
            .catch(err => alert("Failed to update score"));
        }

        function updateDisplay() {
            document.getElementById('score').textContent = `Score: ${runs}-${wickets}`;
            document.getElementById('overs').textContent = `Overs: ${overs}.${balls}`;
            document.getElementById('striker').textContent = `Striker: ${striker}`;
            document.getElementById('nonStriker').textContent = `Non-Striker: ${nonStriker}`;
        }

        updateDisplay();
    </script>
</body>
</html>
